function validateFirstTabFields(){var t=document.getElementById("documentPropertiesForm");if(!t)return!1;var e=!0;return t.querySelectorAll("input[required], select[required]").forEach(function(t){if(null!==t.offsetParent&&!t.disabled)if("SELECT"===t.tagName&&"undefined"!=typeof $&&$(t).data("select2")){(i=$(t).val())&&""!==i&&null!==i?(t.classList.remove("is-invalid"),t.classList.add("is-valid")):(e=!1,t.classList.add("is-invalid"),t.classList.remove("is-valid"))}else{var i=t.value;"number"===t.type?!i||""===i||parseFloat(i)<=0?(e=!1,t.classList.add("is-invalid"),t.classList.remove("is-valid")):(t.classList.remove("is-invalid"),t.classList.add("is-valid")):i&&""!==i.trim()?(t.classList.remove("is-invalid"),t.classList.add("is-valid")):(e=!1,t.classList.add("is-invalid"),t.classList.remove("is-valid"))}}),e}function updateTabsState(t,e){if(e){for(var i=validateFirstTabFields(),a=t.querySelectorAll(".nav-link"),s=1;s<a.length;s++)i?(a[s].classList.remove("disabled"),a[s].style.pointerEvents="",a[s].style.opacity="",a[s].style.cursor=""):(a[s].classList.add("disabled"),a[s].style.pointerEvents="none",a[s].style.opacity="0.5",a[s].style.cursor="not-allowed");updateWarningAlertVisibility(i)}}function updateWarningAlertVisibility(t){var e=document.getElementById("first-tab-warning-alert");e&&(e.style.display=t?"none":"block")}function validateField(t){if(t.hasAttribute("required")){if("text"===t.type||"number"===t.type)return t.value&&""!==t.value.trim()?(t.setCustomValidity(""),t.classList.remove("is-invalid"),t.checkValidity()&&t.classList.add("is-valid"),!0):(t.setCustomValidity("Este campo es obligatorio"),t.classList.add("is-invalid"),t.classList.remove("is-valid"),!1);if("SELECT"===t.tagName)return t.value&&""!==t.value?(t.setCustomValidity(""),t.classList.remove("is-invalid"),t.classList.add("is-valid"),!0):(t.setCustomValidity("Por favor seleccione una opciÃ³n"),t.classList.add("is-invalid"),t.classList.remove("is-valid"),!1)}return!0}function setupFormValidation(t,e,i){t&&(t.querySelectorAll("input[required], select[required]").forEach(function(t){validateField(t),"SELECT"===t.tagName&&"undefined"!=typeof $&&$(t).data("select2")?$(t).on("select2:select select2:clear",function(){var t=this;setTimeout(function(){(validateField(t),e)?updateTabsState(i,e):updateWarningAlertVisibility(validateFirstTabFields())},10)}):(t.addEventListener("blur",function(){(validateField(this),e)?updateTabsState(i,e):updateWarningAlertVisibility(validateFirstTabFields())}),t.addEventListener("input",function(){(validateField(this),e)?updateTabsState(i,e):updateWarningAlertVisibility(validateFirstTabFields())}),t.addEventListener("change",function(){(validateField(this),e)?updateTabsState(i,e):updateWarningAlertVisibility(validateFirstTabFields())}))}),setTimeout(function(){t.querySelectorAll("select[required]").forEach(function(t){var a="undefined"!=typeof $?$(t):null;a&&a.data("select2")&&a.on("select2:select select2:clear",function(){setTimeout(function(){(validateField(t),e)?updateTabsState(i,e):updateWarningAlertVisibility(validateFirstTabFields())},10)})})},500))}function showValidationToast(t,e){t&&"function"==typeof t.invokeMethodAsync?t.invokeMethodAsync("ShowValidationToast",e).catch(function(t){console.error("Error al mostrar toast:",t),alert(e)}):alert(e)}function setupNavigationRestrictions(t,e,i){if(e){var a="Por favor debe completar todos los campos requeridos del documento para poder avanzar.";if(updateTabsState(t,e),!e)updateWarningAlertVisibility(validateFirstTabFields());t.querySelectorAll(".nav-link").forEach(function(t,s){s>0&&(t.addEventListener("click",function(t){if(e&&!validateFirstTabFields())return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),showValidationToast(i,a),!1},!0),t.addEventListener("show.bs.tab",function(t){if(e&&!validateFirstTabFields())return t.preventDefault(),showValidationToast(i,a),!1}))});var s=t.querySelector(".next a");s&&s.addEventListener("click",function(e){var s=t.querySelector(".nav-link.active");if(s&&"#document-properties-step"===s.getAttribute("href")&&!validateFirstTabFields())return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),showValidationToast(i,a),!1},!0),t.addEventListener("show.bs.tab",function(t){if(e&&("#document-properties-step"!==t.target.getAttribute("href")&&!validateFirstTabFields()))return t.preventDefault(),showValidationToast(i,a),!1})}}function updateSaveButtonVisibility(t){if(t){var e=t.querySelector(".wizard .last");if(e){var i=t.querySelector(".nav-link.active");if(i){var a=i.getAttribute("href");e.style.display="#notes-step"===a?"":"none"}else e.style.display="none"}}}function setupSaveButtonVisibility(t){t&&(t.addEventListener("shown.bs.tab",function(e){updateSaveButtonVisibility(t)}),t.querySelectorAll(".nav-link").forEach(function(e){e.addEventListener("click",function(){setTimeout(function(){updateSaveButtonVisibility(t)},100)})}))}window.initEditDocumentWizard=function(t,e){function i(){var i=document.getElementById("edit-document-wizard");if(!i)return console.warn("Wizard element not found"),!1;if("undefined"==typeof Wizard)return console.warn("Wizard class not found, retrying..."),!1;try{new Wizard("#edit-document-wizard",{validate:!0});setupNavigationRestrictions(i,t,e);var a=document.getElementById("documentPropertiesForm");return a&&setupFormValidation(a,t,i),setTimeout(function(){t?updateTabsState(i,t):updateWarningAlertVisibility(validateFirstTabFields());updateSaveButtonVisibility(i)},600),setupSaveButtonVisibility(i),console.log("Edit document wizard initialized successfully"),!0}catch(t){return console.error("Error initializing wizard:",t),!1}}if(!i())var a=0,s=setInterval(function(){a++,(i()||a>=10)&&(clearInterval(s),a>=10&&"undefined"==typeof Wizard&&console.error("Wizard class not found after multiple attempts"))},100)},window.resetEditDocumentWizard=function(){var t=document.getElementById("edit-document-wizard");if(t){var e=t.querySelector(".nav-link");if(e){var i=document.querySelector(e.getAttribute("href"));i&&(t.querySelectorAll(".nav-link").forEach(function(t){t.classList.remove("active")}),t.querySelectorAll(".tab-pane").forEach(function(t){t.classList.remove("show","active")}),e.classList.add("active"),i.classList.add("show","active"),updateSaveButtonVisibility(t))}}};
//# sourceMappingURL=form-wizard-edit.min.js.map
